<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guess the Number - Beta Concept</title>
    <!-- Import Main Styles for fonts and basic variables if possible, though I will override most -->
    <link rel="stylesheet" href="../css/styled882.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700,900">
    <style>
        /* Game Specific Styles */
        body {
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Roboto', sans-serif;
        }

        .game-container {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        h1, h2 {
            font-family: 'Playfair Display', serif;
            color: #1a2930;
            margin-bottom: 20px;
        }

        h1 { font-size: 2.5em; color: #8f2829; }
        h2 { font-size: 1.8em; }

        p {
            color: #757575;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .btn-game {
            background-color: #8f2829;
            color: #fff;
            border: none;
            padding: 12px 24px;
            font-size: 1em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease;
            margin: 5px;
            font-family: 'Roboto', sans-serif;
        }

        .btn-game:hover {
            background-color: #970824;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: #757575;
        }
        .btn-secondary:hover {
            background-color: #555;
        }

        .difficulty-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input[type="number"] {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #e0e0e0;
            border-radius: 4px;
            margin-bottom: 20px;
            text-align: center;
            outline: none;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }

        input[type="number"]:focus {
            border-color: #8f2829;
        }

        .message {
            margin-top: 20px;
            font-weight: 500;
            min-height: 1.6em;
        }
        .message.error { color: #d32f2f; }
        .message.success { color: #388e3c; }
        .message.hint { color: #f57c00; }

        .attempts-info {
            margin-top: 10px;
            font-size: 0.9em;
            color: #9e9e9e;
        }

        .history {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .history-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            list-style: none;
            padding: 0;
        }
        .history-item {
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9em;
        }

        /* Screens */
        .screen { display: none; animation: fadeIn 0.5s ease; }
        .screen.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Simple confetti animation helper class (can be expanded) */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall linear forwards;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <div class="game-container">
        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <h1>Guess the Number</h1>
            <p>Select your difficulty level to start playing.</p>
            <div class="difficulty-options">
                <button class="btn-game" onclick="startGame('easy')">Easy (1-50, 10 attempts)</button>
                <button class="btn-game" onclick="startGame('medium')">Medium (1-100, 7 attempts)</button>
                <button class="btn-game" onclick="startGame('hard')">Hard (1-200, 5 attempts)</button>
            </div>
            <br>
            <a href="../index.html" style="color: #757575; text-decoration: underline; font-size: 0.9em;">Back to Home</a>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <h2 id="game-title">Guess 1 - 100</h2>
            <p id="instruction">Enter your guess below:</p>

            <input type="number" id="guess-input" placeholder="?" onkeydown="if(event.key==='Enter') checkGuess()">
            <button class="btn-game" onclick="checkGuess()">Submit Guess</button>
            <button class="btn-game btn-secondary" onclick="resetGame()">Restart</button>

            <div id="feedback-message" class="message"></div>
            <div class="attempts-info">Attempts remaining: <span id="attempts-left">0</span></div>

            <div class="history">
                <p style="margin-bottom: 10px; font-size: 0.9em;">Previous Guesses:</p>
                <ul id="history-list" class="history-list"></ul>
            </div>
        </div>

        <!-- End Screen -->
        <div id="end-screen" class="screen">
            <h1 id="end-title">Game Over</h1>
            <p id="end-message">You ran out of attempts.</p>
            <div id="end-stats" style="margin-bottom: 20px; font-weight: bold; color: #1a2930;"></div>
            <button class="btn-game" onclick="showStartScreen()">Play Again</button>
            <br><br>
            <a href="../index.html" style="color: #757575; text-decoration: underline; font-size: 0.9em;">Back to Home</a>
        </div>
    </div>

    <script>
        // Game State
        let targetNumber;
        let maxAttempts;
        let attemptsRemaining;
        let currentDifficulty;
        let guesses = [];
        let rangeMax;

        const screens = {
            start: document.getElementById('start-screen'),
            game: document.getElementById('game-screen'),
            end: document.getElementById('end-screen')
        };

        function showScreen(screenName) {
            Object.values(screens).forEach(screen => screen.classList.remove('active'));
            screens[screenName].classList.add('active');
        }

        function showStartScreen() {
            showScreen('start');
        }

        function startGame(difficulty) {
            guesses = [];
            currentDifficulty = difficulty;
            document.getElementById('history-list').innerHTML = '';
            document.getElementById('feedback-message').textContent = '';
            document.getElementById('guess-input').value = '';

            switch(difficulty) {
                case 'easy':
                    rangeMax = 50;
                    maxAttempts = 10;
                    break;
                case 'medium':
                    rangeMax = 100;
                    maxAttempts = 7;
                    break;
                case 'hard':
                    rangeMax = 200;
                    maxAttempts = 5;
                    break;
            }

            targetNumber = Math.floor(Math.random() * rangeMax) + 1;
            attemptsRemaining = maxAttempts;

            document.getElementById('game-title').textContent = `Guess Number (1 - ${rangeMax})`;
            document.getElementById('attempts-left').textContent = attemptsRemaining;

            showScreen('game');
            document.getElementById('guess-input').focus();
        }

        function checkGuess() {
            const input = document.getElementById('guess-input');
            const feedback = document.getElementById('feedback-message');
            const guess = parseInt(input.value);

            if (isNaN(guess) || guess < 1 || guess > rangeMax) {
                feedback.textContent = `Please enter a number between 1 and ${rangeMax}.`;
                feedback.className = 'message error';
                return;
            }

            if (guesses.includes(guess)) {
                feedback.textContent = `You already guessed ${guess}!`;
                feedback.className = 'message hint';
                return;
            }

            guesses.push(guess);
            attemptsRemaining--;
            document.getElementById('attempts-left').textContent = attemptsRemaining;

            // Add to history
            const li = document.createElement('li');
            li.className = 'history-item';
            li.textContent = guess;
            document.getElementById('history-list').appendChild(li);

            input.value = '';
            input.focus();

            if (guess === targetNumber) {
                endGame(true);
            } else if (attemptsRemaining === 0) {
                endGame(false);
            } else {
                if (guess < targetNumber) {
                    feedback.textContent = "Too Low! Try higher.";
                    feedback.className = 'message hint';
                } else {
                    feedback.textContent = "Too High! Try lower.";
                    feedback.className = 'message hint';
                }
            }
        }

        function endGame(win) {
            const title = document.getElementById('end-title');
            const message = document.getElementById('end-message');
            const stats = document.getElementById('end-stats');

            if (win) {
                title.textContent = "You Won!";
                title.style.color = "#388e3c";
                message.textContent = `Congratulations! You guessed ${targetNumber}.`;
                stats.textContent = `Attempts used: ${maxAttempts - attemptsRemaining}`;
                createConfetti();
            } else {
                title.textContent = "Game Over";
                title.style.color = "#d32f2f";
                message.textContent = `The number was ${targetNumber}. Better luck next time!`;
                stats.textContent = "";
            }

            showScreen('end');
        }

        function resetGame() {
            if(confirm("Are you sure you want to restart?")) {
                showStartScreen();
            }
        }

        function createConfetti() {
            // Simple confetti effect
            for(let i=0; i<50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                confetti.style.backgroundColor = '#' + Math.floor(Math.random()*16777215).toString(16);
                document.body.appendChild(confetti);

                setTimeout(() => confetti.remove(), 5000);
            }
        }

        // Add CSS animation for confetti
        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes fall {
                0% { top: -10px; transform: rotate(0deg); opacity: 1; }
                100% { top: 100vh; transform: rotate(720deg); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

    </script>
</body>
</html>
